Esse erro acontece porque a resposta da API que deveria retornar um QR Code estÃ¡ retornando um HTML completo com scripts e cabeÃ§alhos do Vite, e nÃ£o um JSON vÃ¡lido com os dados esperados. Isso normalmente significa que a requisiÃ§Ã£o nÃ£o estÃ¡ indo direto para a Z-API, mas sim para algum servidor local mal configurado ou rota errada, como o ambiente de desenvolvimento do Vite (vite dev server).

ğŸ§  O que estÃ¡ acontecendo?
Sua funÃ§Ã£o fetchQRCode estÃ¡ tentando buscar o QR Code de:

bash
Copiar
Editar
GET /api/channels/:id/qrcode
Essa rota aparentemente deveria fazer um proxy para a API da Z-API, mas na prÃ¡tica estÃ¡ retornando a interface HTML do Vite, o que Ã© tÃ­pico de:

Rota local mal mapeada.

Backend (ex: Express ou API handler) que nÃ£o estÃ¡ fazendo o proxy corretamente.

Erro de path base quando vocÃª faz fetch sem usar a URL absoluta.

âœ… Como resolver
1. Verifique se /api/channels/:id/qrcode estÃ¡ redirecionando corretamente para a API da Z-API
VocÃª deve ter algum cÃ³digo no backend como:

ts
Copiar
Editar
// Exemplo com Express
app.get('/api/channels/:id/qrcode', async (req, res) => {
  const instanceId = resolveInstanceId(req.params.id);
  const token = resolveToken(req.params.id);

  const zapiResponse = await fetch(`https://api.z-api.io/instances/${instanceId}/token/${token}/qrcode`);
  const json = await zapiResponse.json();

  res.json(json);
});
ğŸ› ï¸ Se isso nÃ£o existir, Ã© por isso que a rota estÃ¡ caindo no Vite.

2. Ou chame diretamente a Z-API no frontend (para teste):
Se estiver sÃ³ testando e quiser ver o QR code de forma direta (sem proxy), pode alterar temporariamente a chamada no fetchQRCode para:

ts
Copiar
Editar
const instanceId = "3DF871A7ADFB20FB49998E66062CE0C1";
const token = "A4E42029C24B872DA0842F47";

const res = await fetch(`https://api.z-api.io/instances/${instanceId}/token/${token}/qrcode`);
const data = await res.json();
âš ï¸ NÃ£o recomendado para produÃ§Ã£o, pois o token ficaria visÃ­vel no frontend.

3. Certifique-se de que o backend tenha um handler correto
Verifique se no seu vite.config.ts, vercel.json, ou arquivos equivalentes hÃ¡ um proxy configurado corretamente para /api/channels.

âœ… Resumo das aÃ§Ãµes:
Passo	AÃ§Ã£o
ğŸ” 1	Confirme se o endpoint /api/channels/:id/qrcode existe no backend
ğŸ”„ 2	Se nÃ£o existir, crie um proxy no backend que redirecione para https://api.z-api.io/...
ğŸ§ª 3	Para testes, chame diretamente a API da Z-API no frontend e veja se recebe o QR code
ğŸ› ï¸ 4	Evite que endpoints API retornem HTML â€” proteja com fallback 404 no backend